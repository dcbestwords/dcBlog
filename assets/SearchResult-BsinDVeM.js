import{u as O,f as Z,g as ee,h as I,i as te,j as re,t as ae,k as le,l as D,m as F,n as se,p as $,q as r,s as T,v as J,R as M,x as oe,y as ce,z as ie,A as ne,B as ue,C as me,D as he,E as _e,O as ve,F as de,G as pe,P as ge,H as ye,I as Ee,J as P}from"./app-VVktv2HE.js";const be=["/","/intro.html","/Efficiency/01_git.html","/Efficiency/02_module.html","/Efficiency/03_npm.html","/Efficiency/","/Project_50/1_Expanding-Cards.html","/Project_50/2_Progress-Steps.html","/Project_50/3_RotatingNav.html","/Project_50/4_HiddenSearch.html","/Project_50/5_BlurryLoading.html","/Project_50/6_ScrollAnimation.html","/Project_50/","/Server/","/algorithm/","/basic_language/","/reference/ES6.html","/reference/Learn-Vue-Source-Code.html","/reference/","/reference/python.html","/reference/typescript.html","/Efficiency/webpack/01_problem.html","/Efficiency/webpack/02_Introduction.html","/Efficiency/webpack/03_plugins.html","/Efficiency/webpack/04_devSever.html","/Efficiency/webpack/05_loader.html","/Efficiency/webpack/06_source.html","/Efficiency/webpack/07_babel.html","/Efficiency/webpack/08_package.html","/Efficiency/webpack/","/Server/CSharp/01_C-Sharp.html","/Server/CSharp/","/Server/mongodb/","/Server/mongodb/mongodb.html","/Server/nodeJS/01_Introduction.html","/Server/nodeJS/02_install.html","/Server/nodeJS/04_nodejs-module.html","/Server/nodeJS/05_innermodule.html","/Server/nodeJS/06_express.html","/Server/nodeJS/07_api.html","/Server/nodeJS/08_%20session.html","/Server/nodeJS/","/Server/python/","/Server/python/python.html","/algorithm/data_structure/sort.html","/algorithm/method_mock/01_mock_new.html","/algorithm/method_mock/02_instanceof.html","/algorithm/method_mock/03_apply.html","/algorithm/method_mock/04_reduce.html","/algorithm/method_mock/05_trans_array.html","/algorithm/method_mock/06_flat_array.html","/algorithm/method_mock/07_unique_array.html","/algorithm/method_mock/08_debounce_throttle.html","/algorithm/method_mock/09_curry.html","/algorithm/method_mock/10_extends.html","/algorithm/method_mock/11_clone.html","/algorithm/method_mock/12_jsonp.html","/algorithm/method_mock/13_xhr.html","/algorithm/method_mock/14_Performance_op.html","/algorithm/method_mock/15_render.html","/algorithm/method_mock/16_overload.html","/algorithm/method_mock/17_repeat.html","/algorithm/method_mock/18_URL_separate.html","/algorithm/method_mock/19_downloadImage.html","/algorithm/method_mock/20_concurControl.html","/algorithm/solution/solution.html","/basic_language/CSS/css_1.html","/basic_language/CSS/css_2.html","/basic_language/CSS/css_3.html","/basic_language/CSS/css_4.html","/basic_language/CSS/css_5.html","/basic_language/HTML/1_html.html","/basic_language/HTML/2_attribute_and_property.html","/basic_language/HTML/3_h5.html","/basic_language/javaScript/01_JavaScript%E5%9F%BA%E7%A1%80.html","/basic_language/javaScript/02_Summarize.html","/basic_language/javaScript/03_advance1.html","/basic_language/javaScript/04_advance2.html","/basic_language/javaScript/05_BOM.html","/basic_language/javaScript/06_DOM.html","/basic_language/javaScript/07_event.html","/basic_language/javaScript/08_advace3.html","/basic_language/javaScript/09_async.html","/basic_language/jquery/01_jquery.html","/basic_language/preprocess/SASS.html","/basic_language/preprocess/less.html","/basic_language/vue/vue.html","/basic_language/vue/vue3.html","/browser_internet/Browser/01_renderPdf.html","/browser_internet/Browser/02_render.html","/browser_internet/Browser/03_cache.html","/browser_internet/Browser/","/browser_internet/Browser/eventLoop.html","/browser_internet/Browser/v8Object.html","/browser_internet/network/","/browser_internet/network/browser.html","/browser_internet/network/crossDomain.html","/browser_internet/network/networkModel.html","/browser_internet/network/websocket.html","/paper/code/torch_api.html","/paper/paper/test.html","/source_code/lodash/mock_get.html","/source_code/promise/async.html","/source_code/promise/promise.html","/source_code/vue2/vuejs2.html","/source_code/vue2/vuejs2_1.html","/source_code/vue3/vue3%E6%80%BB%E7%BB%93.html","/source_code/vue3/vuejs1-4.html","/source_code/vue3/vuejs5.html","/source_code/vue3/vuejs6.html","/browser_internet/network/cyber_security/CSRF%E6%94%BB%E5%87%BB.html","/browser_internet/network/cyber_security/HTTPS%E5%8D%8F%E8%AE%AE.html","/browser_internet/network/cyber_security/","/browser_internet/network/cyber_security/XSS%E6%94%BB%E5%87%BB.html","/browser_internet/network/cyber_security/%E5%8A%A0%E5%AF%86.html","/404.html","/algorithm/data_structure/","/algorithm/method_mock/","/algorithm/solution/","/basic_language/CSS/","/basic_language/HTML/","/basic_language/javaScript/","/basic_language/jquery/","/basic_language/preprocess/","/basic_language/vue/","/browser_internet/","/paper/code/","/paper/","/paper/paper/","/source_code/lodash/","/source_code/","/source_code/promise/","/source_code/vue2/","/source_code/vue3/","/category/","/category/%E6%95%88%E7%8E%87%E5%8D%8F%E4%BD%9C/","/category/%E9%A1%B5%E9%9D%A2%E7%BB%83%E4%B9%A0/","/category/%E6%9C%8D%E5%8A%A1%E7%AB%AF/","/category/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%89%8B%E5%86%99/","/category/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/","/category/%E6%96%87%E6%A1%A3%E6%95%99%E7%A8%8B/","/category/%E6%B5%8F%E8%A7%88%E5%99%A8%E9%80%9A%E4%BF%A1/","/tag/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/tag/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","/tag/%E6%89%8B%E5%86%99/","/tag/%E6%B5%8F%E8%A7%88%E5%99%A8/","/tag/%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86/","/tag/v8%E5%BC%95%E6%93%8E/","/tag/%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/","/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E9%80%9A%E4%BF%A1/","/tag/%E8%B7%A8%E5%9F%9F/","/tag/websocket/","/tag/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/","/article/","/star/","/timeline/"],Se="SEARCH_PRO_QUERY_HISTORY",v=O(Se,[]),ke=()=>{const{queryHistoryCount:a}=P,l=a>0;return{enabled:l,queryHistory:v,addQueryHistory:s=>{l&&(v.value.length<a?v.value=Array.from(new Set([s,...v.value])):v.value=Array.from(new Set([s,...v.value.slice(0,a-1)])))},removeQueryHistory:s=>{v.value=[...v.value.slice(0,s),...v.value.slice(s+1)]}}},Q=a=>be[a.id]+("anchor"in a?`#${a.anchor}`:""),fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:x}=P,d=O(fe,[]),we=()=>{const a=x>0;return{enabled:a,resultHistory:d,addResultHistory:l=>{if(a){const s={link:Q(l),display:l.display};"header"in l&&(s.header=l.header),d.value.length<x?d.value=[s,...d.value]:d.value=[s,...d.value.slice(0,x-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},Be=a=>{const l=ue(),s=I(),A=me(),c=D(!1),g=he([]);return _e(()=>{const{search:S,terminate:p}=ve(),k=()=>{g.value=[],c.value=!1},y=Ee(h=>{c.value=!0,h?S(h,s.value,l.value).then(_=>{var f,E;return((E=(f=l.value).searchFilter)==null?void 0:E.call(f,_,h,s.value,A.value))??_}).then(_=>{g.value=_,c.value=!1}).catch(_=>{console.error(_),k()}):k()},P.searchDelay);$([a,s],()=>y(a.value),{immediate:!0}),de(()=>{p()})}),{searching:c,results:g}};var Ce=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:l}){const s=ee(),A=I(),c=te(re),{enabled:g,addQueryHistory:S,queryHistory:p,removeQueryHistory:k}=ke(),{enabled:y,resultHistory:h,addResultHistory:_,removeResultHistory:f}=we(),E=g||y,C=ae(a,"query"),{results:b,searching:U}=Be(C),o=le({isQuery:!0,index:0}),u=D(0),m=D(0),L=F(()=>E&&(p.value.length>0||h.value.length>0)),j=F(()=>b.value.length>0),H=F(()=>b.value[u.value]||null),z=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?h.value.length-1:p.value.length-1):o.index=t-1},V=()=>{const{isQuery:e,index:t}=o;t===(e?p.value.length-1:h.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},Y=()=>{u.value=u.value>0?u.value-1:b.value.length-1,m.value=H.value.contents.length-1},G=()=>{u.value=u.value<b.value.length-1?u.value+1:0,m.value=0},N=()=>{m.value<H.value.contents.length-1?m.value+=1:G()},K=()=>{m.value>0?m.value-=1:Y()},R=e=>e.map(t=>pe(t)?t:r(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ge[e.index]||"$content",[i,B=""]=ye(t)?t[A.value].split("$content"):t.split("$content");return e.display.map(n=>r("div",R([i,...n,B])))}return e.display.map(t=>r("div",R(t)))},w=()=>{u.value=0,m.value=0,l("updateQuery",""),l("close")};return se("keydown",e=>{if(a.isFocusing){if(j.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=H.value.contents[m.value];S(a.query),_(t),s.push(Q(t)),w()}}else if(y){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(l("updateQuery",p.value[t]),e.preventDefault()):(s.push(h.value[t].link),w())}}}}),$([u,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>r("div",{class:["search-pro-result-wrapper",{empty:C.value?!j.value:!L.value}],id:"search-pro-results"},C.value===""?E?L.value?[g?r("ul",{class:"search-pro-result-list"},r("li",{class:"search-pro-result-list-item"},[r("div",{class:"search-pro-result-title"},c.value.queryHistory),p.value.map((e,t)=>r("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{l("updateQuery",e)}},[r(T,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},e),r("button",{class:"search-pro-remove-icon",innerHTML:J,onClick:i=>{i.preventDefault(),i.stopPropagation(),k(t)}})]))])):null,y?r("ul",{class:"search-pro-result-list"},r("li",{class:"search-pro-result-list-item"},[r("div",{class:"search-pro-result-title"},c.value.resultHistory),h.value.map((e,t)=>r(M,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{w()}},()=>[r(T,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},[e.header?r("div",{class:"content-header"},e.header):null,r("div",e.display.map(i=>R(i)).flat())]),r("button",{class:"search-pro-remove-icon",innerHTML:J,onClick:i=>{i.preventDefault(),i.stopPropagation(),f(t)}})]))])):null]:c.value.emptyHistory:c.value.emptyResult:U.value?r(oe,{hint:c.value.searching}):j.value?r("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:t},i)=>{const B=u.value===i;return r("li",{class:["search-pro-result-list-item",{active:B}]},[r("div",{class:"search-pro-result-title"},e||c.value.defaultTitle),t.map((n,X)=>{const q=B&&m.value===X;return r(M,{to:Q(n),class:["search-pro-result-item",{active:q,"aria-selected":q}],onClick:()=>{S(a.query),_(n),w()}},()=>[n.type==="text"?null:r(n.type==="title"?ce:n.type==="heading"?ie:ne,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?r("div",{class:"content-header"},n.header):null,r("div",W(n))])])})])})):c.value.emptyResult)}});export{Ce as default};
